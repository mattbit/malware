\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{essay}[2018/09/14 Short Essay]

\LoadClass[twocolumn, a4paper, 10pt]{article}
\RequirePackage{xcolor}
\RequirePackage{fontspec}
\RequirePackage[textwidth=18.5cm]{geometry}
\definecolor{arsenic}{rgb}{0.23, 0.27, 0.29}
\definecolor{dark}{rgb}{0.13, 0.13, 0.13}
\RequirePackage[sf,bf]{titlesec}


\RequirePackage[font={color=arsenic,sf,small}]{caption}
\DeclareCaptionLabelFormat{bold}{\textbf{(#2)}}
\captionsetup[figure]{labelfont={bf},labelsep=quad,justification=raggedright,singlelinecheck=false}

\newcommand{\figrule}{\color{arsenic}{\rule{\linewidth}{.75pt}}}

\renewcommand{\maketitle}{%
  \@title%
}

\setlength{\columnsep}{0.5cm}

\setmainfont[Ligatures=TeX]{Source Serif Pro}
\setsansfont[Ligatures=TeX]{Source Sans Pro}
\newfontfamily\bbfamily{Source Sans Pro Bold}

\titleformat*{\section}{\bbfamily\color{arsenic}\uppercase}
\titleformat*{\subsection}{\bbfamily\normalsize\color{arsenic}}
\titlespacing*{\subsection}{0pt}{\baselineskip}{0.5\baselineskip}

\renewcommand{\maketitle}{
  \twocolumn[%
    \color{arsenic}
    \textsf{\textsc{\MakeLowercase{\@date}}}\newline
    \rule{\linewidth}{2pt}
    \begin{flushleft}\huge\bfseries \@title \end{flushleft}
    \begin{flushleft}\large\sffamily \@author \end{flushleft}
    \vspace{1.5cm}%
  ]
}

% % Fix titlesec bug
% % \usepackage{etoolbox}
% % \makeatletter
% % \patchcmd{\ttlh@hang}{\parindent\z@}{\parindent\z@\leavevmode}{}{}
% % \patchcmd{\ttlh@hang}{\noindent}{}{}{}
% % \makeatother
% % end fix
% \usepackage{hyperref}
% \usepackage{xltxtra}
% \usepackage{titling}
